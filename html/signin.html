<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/signin.css">
    <title>Sign In</title>
</head>

<body>
    <div class="container">
        <div class="form-box">
            <h1 class="title">
                <p style="color: white;">Moon<span>Flix</span></p>
            </h1>
            <form>
                <div class="input-group">
                    <div class="input-field">
                        <input type="text" required placeholder="username" class="username">
                    </div>
                    <div class="input-field" id="nameField">
                        <input type="text" placeholder="display name" required class="display">
                    </div>
                    <div class="input-field">
                        <input type="password" placeholder="password" required class="password">
                    </div>
                    <div class="input-field" id="confirmField">
                        <input type="password" placeholder="confirm password" required class="confirm">
                    </div>
                </div>
                <div class="btn-field">
                    <button type="button" id="signupBtn">SIGN UP</button>
                </div>
                <div class="btn-field">
                    <button type="button" id="signinBtn" class="disable">SIGN IN</button>
                </div>
            </form>
        </div>
    </div>



    <script>
        let signupBtn = document.getElementById("signupBtn");
        let signinBtn = document.getElementById("signinBtn");
        let nameField = document.getElementById("nameField");
        let title = document.getElementById("title");
        let confirmField = document.getElementById("confirmField");

        signinBtn.onclick = function () {
            nameField.style.maxHeight = "0";
            confirmField.style.maxHeight = "0";
            signupBtn.classList.add("disable");
            signinBtn.classList.remove("disable");
        }

        signupBtn.onclick = function () {
            nameField.style.maxHeight = "60px";
            confirmField.style.maxHeight = "60px";
            signupBtn.classList.remove("disable");
            signinBtn.classList.add("disable");
        }

        signupBtn.addEventListener("click", (e) => {
            const inputusername = document.querySelector(".username");
            const inputdisplay = document.querySelector(".display");
            const inputpassword = document.querySelector(".password");
            const inputconfirm = document.querySelector(".confirm");
            e.preventDefault();
            if (
                inputusername.value === "" ||
                inputdisplay.value === "" ||
                inputpassword.value === "" ||
                inputconfirm.value === ""
            ) {
                alert("Ensure you input a value in the fields!");
            } else {

                const user = {
                    username: inputusername.value,
                    display: inputdisplay.value,
                    password: inputpassword.value,
                    confirm: inputconfirm.value,
                };
                let json = JSON.stringify(user);
                localStorage.setItem(inputusername.value, json);
                alert("Sign Up Success");
                window.location.href = "../html/home_user.html";
            }
        });

        signinBtn.addEventListener("click", (e) => {
            const inputusername = document.querySelector(".username");
            const inputpassword = document.querySelector(".password");

            e.preventDefault();
            if (
                inputusername.value === "" ||
                inputpassword.value === ""
            ) {
                alert("Ensure you input a value in the fields!");
            }
            else {
                const user = {
                    username: inputusername.value,
                    password: inputpassword.value,
                };
                let json = JSON.stringify(user);
                localStorage.setItem(inputusername.value, json);
                alert("Sign In Success");
                window.location.href = "./home_user.html";
            }
        });
    </script>
</body>

</html>